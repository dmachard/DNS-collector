# Collector: DNStap

## DNS tap

Collector to logging DNStap stream from DNS servers.
The traffic can be a tcp or unix DNStap stream. TLS is also supported.

Options:

- `listen-ip`: (string) listen on ip
- `listen-port`: (integer) listening on port
- `sock-path`: (string) unix socket path
- `tls-support:`: (boolean) to enable, set to true
- `tls-min-version`: (string) min tls version
- `cert-file`: (string) certificate server file
- `key-file`: (string) private key server file
- `sock-rcvbuf`: (integer) sets the socket receive buffer in bytes SO_RCVBUF, set to zero to use the default system value
  > This advanced parameter allows fine-tuning of network performance by adjusting the amount of data the socket can receive before signaling to the sender to slow down.
- `reset-conn`: (bool) Reset TCP connection on exit
  > Send a TCP reset to the remote sender to ensure a proper termination of the connection.
- `chan-buffer-size`: (integer) channel buffer size used on incoming packet, number of packet before to drop it.
- `disable-dnsparser"`: (bool) disable the minimalist DNS parser
  > Some JSON keys should not be available, such as `dns.id`, `dns.flags`, ...
- `extended-support`: (boolen) decode the extended extra field sent by DNScollector
  > If this setting is enabled, DNScollector will expect receiving the specific [protobuf structure](./../../dnsutils/extended_dnstap.proto) in the extra field, which must be sent by another DNS collector.
  > This field will contain additional metadata generated by various transformations such as filtering, ATags, and others.

Default values:

```yaml
dnstap:
  listen-ip: 0.0.0.0
  listen-port: 6000
  sock-path: null
  tls-support: false
  tls-min-version: 1.2
  cert-file: ""
  key-file: ""
  sock-rcvbuf: 0
  reset-conn: true
  chan-buffer-size: 65535
  disable-dnsparser: false
  extended-support: false
```

## DNS tap Proxifier

Collector that receives DNSTAP traffic and relays it without decoding or transformations.
This collector must be used with the DNStap logger.

Dnstap stream collector can be a tcp or unix socket listener. TLS is also supported.

For config examples, take a look to the following [one](../_examples/use-case-12.yml)

Options:

- `listen-ip`: (string) listen on ip
- `listen-port`: (integer) listening on port
- `sock-path`: (string) unix socket path
- `tls-support:`: (boolean) to enable, set to true
- `tls-min-version`: (string) min tls version
- `cert-file`: (string) certificate server file
- `key-file`: (string) private key server file

Default values:

```yaml
dnstap-relay:
  listen-ip: 0.0.0.0
  listen-port: 6000
  sock-path: null
  tls-support: false
  tls-min-version: 1.2
  cert-file: ""
  key-file: ""
```
